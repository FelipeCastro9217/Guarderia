@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
}
<!-- Views/VentasServicios/Detalles.cshtml -->
@model Guarderia.Models.VentaServicio
@{
    ViewData["Title"] = "Detalles de la Venta";
}

<div class="container mt-4">
    <h2>@ViewData["Title"]</h2>
    <hr />

    <div class="row">
        <div class="col-md-6">
            <div class="card mb-3">
                <div class="card-header bg-primary text-white">
                    <h5>Información de la Venta</h5>
                </div>
                <div class="card-body">
                    <dl class="row">
                        <dt class="col-sm-4">ID Venta:</dt>
                        <dd class="col-sm-8">@Model.IdVenta</dd>

                        <dt class="col-sm-4">Fecha:</dt>
                        <dd class="col-sm-8">@Model.FechaVenta.ToString("dd/MM/yyyy HH:mm")</dd>

                        <dt class="col-sm-4">Estado:</dt>
                        <dd class="col-sm-8">
                            @if (Model.Estado == "Completada")
                            {
                                <span class="badge bg-success">@Model.Estado</span>
                            }
                            else
                            {
                                <span class="badge bg-warning">@Model.Estado</span>
                            }
                        </dd>
                    </dl>
                </div>
            </div>
        </div>

        <div class="col-md-6">
            <div class="card mb-3">
                <div class="card-header bg-info text-white">
                    <h5>Información del Cliente</h5>
                </div>
                <div class="card-body">
                    <dl class="row">
                        <dt class="col-sm-4">Cliente:</dt>
                        <dd class="col-sm-8">@Model.Cliente?.Nombre @Model.Cliente?.Apellido</dd>

                        <dt class="col-sm-4">Teléfono:</dt>
                        <dd class="col-sm-8">@Model.Cliente?.Telefono</dd>

                        <dt class="col-sm-4">Mascota:</dt>
                        <dd class="col-sm-8">@Model.Mascota?.Nombre (@Model.Mascota?.Raza)</dd>
                    </dl>
                </div>
            </div>
        </div>
    </div>

    <div class="card mb-3">
        <div class="card-header bg-success text-white">
            <h5>Detalle de Servicios</h5>
        </div>
        <div class="card-body">
            <div class="table-responsive">
                <table class="table table-bordered">
                    <thead>
                        <tr>
                            <th>Servicio</th>
                            <th>Cantidad</th>
                            <th>Precio Unitario</th>
                            <th>Subtotal</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var detalle in Model.DetallesVenta)
                        {
                            <tr>
                                <td>@detalle.Servicio?.NombreServicio</td>
                                <td>@detalle.Cantidad</td>
                                <td>$@detalle.PrecioUnitario.ToString("N2")</td>
                                <td>$@detalle.Subtotal.ToString("N2")</td>
                            </tr>
                        }
                    </tbody>
                    <tfoot>
                        <tr class="table-active">
                            <td colspan="3" class="text-end"><strong>TOTAL:</strong></td>
                            <td><strong>$@Model.Total.ToString("N2")</strong></td>
                        </tr>
                    </tfoot>
                </table>
            </div>
        </div>
    </div>

    <div class="mt-3">
        <a asp-action="Index" class="btn btn-secondary">
            <i class="bi bi-arrow-left"></i> Volver
        </a>
    </div>
</div>